# Lock-Screen Widget Guide (Android / PWA)

While Progressive Web Apps cannot yet create native Android "RemoteView" widgets directly, we can achieve a "widget-like" experience using **PWA Shortcuts** and **App Shortcuts**.

## Design Concept
**"The Heartbeat Widget"**
- A 1x1 or 2x1 shortcut on the home screen.
- **Icon**: A dynamic heart icon generated by the app.
- **Label**: "Together: 450 Days" (Dynamic label).

## Implementation Strategy

### 1. PWA Shortcuts (Quick Actions)
Add this to your `manifest.json` (inside `vite.config.js`):
```javascript
shortcuts: [
  {
    name: "Send Love",
    short_name: "Love",
    description: "Send a quick love message",
    url: "/?action=send_love",
    icons: [{ src: "/heart-icon.png", sizes: "96x96" }]
  },
  {
    name: "Check Time",
    short_name: "Days",
    description: "See how long we've been together",
    url: "/",
    icons: [{ src: "/clock-icon.png", sizes: "96x96" }]
  }
]
```
These appear when long-pressing the app icon on Android.

### 2. Native Android Widget (TWA Extension)
For a *true* home-screen widget, you must add Java/Kotlin code to the TWA Android project generated by Bubblewrap.

**Steps:**
1. Open the Android Project in Android Studio.
2. **File > New > Widget > App Widget**.
3. **Layout**: Create a layout with a `TextView` for the days count.
4. **Update Logic**:
   - The TWA and the Widget can share data via `SharedPreferences`.
   - Use a `WorkManager` task in Android to increment the counter daily without needing the app to open.
   - Alternatively, since the start date is static, the Widget can calculate the difference itself using Java's `java.time` package without needing to sync with the JS app!

**Java Logic for Widget (Concept):**
```java
// OnUpdate
LocalDate startDate = LocalDate.of(2023, 1, 1);
long days = ChronoUnit.DAYS.between(startDate, LocalDate.now());
views.setTextViewText(R.id.appwidget_text, days + " Days Together");
```

This is the most battery-efficient and reliable way. The widget calculates the date independently, so it never falls out of sync.
